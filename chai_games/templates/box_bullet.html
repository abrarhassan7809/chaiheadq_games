<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Space Defender</title>

<link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;user-select:none}
body{
    background:#050510;
    font-family:Arial, sans-serif;
    overflow:hidden;
    color:#fff;
    display:flex;
    justify-content:center;
    align-items:center;
}

#game-container{
    width:1200px;
    height:900px;
    position:relative;
    border:2px solid rgba(0,255,255,0.3);
    border-radius:12px;
    background:rgba(0,0,0,0.5);
    box-shadow:0 0 30px rgba(0,255,255,0.2);
}

canvas{display:block}

.screen{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.9);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:10;
}
.hidden{display:none}

button{
    padding:15px 50px;
    font-size:22px;
    border:none;
    cursor:pointer;
    background:linear-gradient(90deg,#ff00de,#00ffff);
    color:#fff;
}

.hud{
    position:absolute;
    top:20px;
    left:20px;
    display:flex;
    gap:30px;
    z-index:5;
}
.hud div{
    background:rgba(0,20,40,0.8);
    padding:10px 20px;
    border-radius:6px;
}
</style>
</head>

<body>

<div id="game-container">
    <canvas id="gameCanvas"></canvas>

    <div class="hud">
        <div>Score: <span id="score">0</span></div>
        <div>Level: <span id="level">1</span></div>
        <div>Lives: <span id="lives">3</span></div>
    </div>

    <div id="startScreen" class="screen">
        <h1>SPACE DEFENDER</h1><br>
        <button onclick="startGame()">START GAME</button>
        <p style="margin-top:20px">Move: WASD / Arrows | Shoot: SPACE</p>
    </div>

    <div id="gameOverScreen" class="screen hidden">
        <h1>GAME OVER</h1>
        <p style="font-size:28px;margin:20px">Score: <span id="finalScore">0</span></p>
        <button onclick="restartGame()">RESTART</button>
    </div>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = 1200;
canvas.height = 900;

// UI
const scoreEl = document.getElementById("score");
const levelEl = document.getElementById("level");
const livesEl = document.getElementById("lives");
const finalScoreEl = document.getElementById("finalScore");
const startScreen = document.getElementById("startScreen");
const gameOverScreen = document.getElementById("gameOverScreen");

// Game State
let score=0, level=1, lives=3, frames=0;
let gameRunning=false;
let animationId=null;

// Player
const player={
    x:canvas.width/2,
    y:canvas.height-100,
    w:40,
    h:40,
    speed:7,
    invulnerable:false
};

// Controls
const keys={};
window.addEventListener("keydown",e=>{
    if([" ","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)) e.preventDefault();
    keys[e.key]=true;
    if(e.key===" " && gameRunning) shoot();
});
window.addEventListener("keyup",e=>keys[e.key]=false);

// Shooting control
let lastShot=0;
const fireCooldown=250;

// Entities
let bullets=[];
let enemies=[];

// Functions
function shoot(){
    const now=Date.now();
    if(now-lastShot<fireCooldown) return;
    lastShot=now;

    bullets.push({x:player.x+player.w/2,y:player.y,r:4});
}

function spawnEnemy(){
    enemies.push({
        x:Math.random()*(canvas.width-40),
        y:-40,
        size:40,
        speed:Math.min(6,1.5+level*0.3)
    });
}

function update(){
    if(!gameRunning) return;

    frames++;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Player movement
    if(keys.w||keys.ArrowUp) player.y-=player.speed;
    if(keys.s||keys.ArrowDown) player.y+=player.speed;
    if(keys.a||keys.ArrowLeft) player.x-=player.speed;
    if(keys.d||keys.ArrowRight) player.x+=player.speed;

    player.x=Math.max(0,Math.min(canvas.width-player.w,player.x));
    player.y=Math.max(0,Math.min(canvas.height-player.h,player.y));

    // Bullets
    bullets.forEach((b,i)=>{
        b.y-=12;
        if(b.y<0) bullets.splice(i,1);
    });

    // Enemies
    if(frames % Math.max(30,100-level*5)===0) spawnEnemy();

    enemies.forEach((e,ei)=>{
        e.y+=e.speed;

        // Collision with player
        if(!player.invulnerable &&
           player.x<e.x+e.size && player.x+player.w>e.x &&
           player.y<e.y+e.size && player.y+player.h>e.y){
            lives--;
            livesEl.textContent=lives;
            player.invulnerable=true;
            setTimeout(()=>player.invulnerable=false,1500);
            enemies.splice(ei,1);
            if(lives<=0) return endGame();
        }

        // Bullet hit
        bullets.forEach((b,bi)=>{
            if(b.x>e.x && b.x<e.x+e.size && b.y>e.y && b.y<e.y+e.size){
                bullets.splice(bi,1);
                enemies.splice(ei,1);
                score+=10;
                if(score%100===0) level++;
                scoreEl.textContent=score;
                levelEl.textContent=level;
            }
        });
    });

    // Draw player
    ctx.fillStyle="#00ffff";
    ctx.fillRect(player.x,player.y,player.w,player.h);

    // Draw bullets
    ctx.fillStyle="#ff00de";
    bullets.forEach(b=>{
        ctx.beginPath();
        ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
        ctx.fill();
    });

    // Draw enemies
    ctx.fillStyle="#ff3366";
    enemies.forEach(e=>ctx.fillRect(e.x,e.y,e.size,e.size));

    animationId=requestAnimationFrame(update);
}

function startGame(){
    startScreen.classList.add("hidden");
    gameOverScreen.classList.add("hidden");
    score=0;level=1;lives=3;frames=0;
    bullets=[];enemies=[];
    scoreEl.textContent=0;
    levelEl.textContent=1;
    livesEl.textContent=3;
    gameRunning=true;
    update();
}

function endGame(){
    gameRunning=false;
    cancelAnimationFrame(animationId);
    finalScoreEl.textContent=score;
    gameOverScreen.classList.remove("hidden");
}

function restartGame(){
    startGame();
}
</script>

</body>
</html>
